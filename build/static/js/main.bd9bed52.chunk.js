(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),a=t.n(r),c=(t(20),t(3)),s=t(5),o=t(1),u=t(4),i=t.n(u),l=t(0),m=function(e){return Object(l.jsxs)("div",{className:"searchFilter flexItem",children:[Object(l.jsx)("label",{htmlFor:"search",children:"Search for a name:"}),Object(l.jsx)("input",{id:"search",value:e.newFilter,onChange:e.handleSearchChange})]})},b=function(e){return Object(l.jsxs)("form",{onSubmit:e.addName,children:[Object(l.jsxs)("div",{className:"formInput flexItem",children:[Object(l.jsx)("label",{htmlFor:"name",children:"name:"}),Object(l.jsx)("input",{id:"name",value:e.newName,onChange:e.handleNameChange})]}),Object(l.jsxs)("div",{className:"formInput flexItem",children:[Object(l.jsx)("label",{htmlFor:"",children:"number:"}),Object(l.jsx)("input",{id:"number",value:e.newNumber,onChange:e.handleNumberChange})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){return Object(l.jsxs)("li",{className:"flexItem",children:[Object(l.jsx)("span",{children:e.person.name}),Object(l.jsxs)("span",{className:"numberRemove",children:[e.person.number,Object(l.jsx)("button",{onClick:function(){return e.remove(e.person)},children:"remove"})]})]})},j=function(e){var n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.newFilter.toLowerCase())})),t=n.map((function(n){return Object(l.jsx)(d,{person:n,remove:e.remove},n.id)}));return Object(l.jsx)("ul",{className:"list",children:n.length?t:"There's no match for the query search"})},h="http://localhost:3001/api/persons",f={create:function(e){return i.a.post(h,e).then((function(e){return e.data}))},remove:function(e){return i.a.delete(h.concat("/".concat(e)))},update:function(e){var n={number:e.number};return i.a.put(h.concat("/".concat(e.id)),n).then((function(e){return e.data}))},baseUrl:h},O=function(e){var n=e.errorMessage;return null===n.message?Object(l.jsx)("div",{className:"error"}):Object(l.jsx)("div",{className:"error ".concat(n.success?"success":"failure"),children:n.message})},v=function(){var e=Object(o.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),u=Object(s.a)(a,2),d=u[0],h=u[1],v=Object(o.useState)(""),p=Object(s.a)(v,2),x=p[0],g=p[1],w=Object(o.useState)(""),N=Object(s.a)(w,2),C=N[0],S=N[1],F=Object(o.useState)({message:null,success:!0}),k=Object(s.a)(F,2),I=k[0],L=k[1];Object(o.useEffect)((function(){i.a.get(f.baseUrl).then((function(e){return r(e.data)}))}),[]);var U=function(e){console.log("Unable to save to the server");var n=e.response.data.error?e.response.data.error:"Unable to save to the server";L({message:n,success:!1}),setTimeout((function(){L(Object(c.a)(Object(c.a)({},I),{},{message:null}))}),5e3)},y=function(){if(d&&x){if(!t.map((function(e){return e.name.toLowerCase()})).includes(d.toLowerCase()))return!0;!function(e){if(window.confirm("".concat(d," is already added to phonebook, ")+"replace the old number with a new one?")){var n=Object(c.a)(Object(c.a)({},e),{},{number:x});f.update(n).then((function(a){var c=t.map((function(t){return t.id!==e.id?t:n}));r(c),h(""),g("")})).catch((function(e){return U(e)}))}}(t.find((function(e){return e.name.toLowerCase()===d.toLowerCase()})))}else alert("You need to provide name and number!");return!1};return Object(l.jsxs)("div",{className:"wrapper",children:[Object(l.jsx)("h1",{children:"Phonebook"}),Object(l.jsx)(m,{newFilter:C,handleSearchChange:function(e){S(e.target.value)}}),Object(l.jsx)("h2",{children:"Add a new"}),Object(l.jsx)(b,{addName:function(e){e.preventDefault(),y()&&function(){var e={name:d,number:x};f.create(e).then((function(e){r(t.concat(e)),h(""),g(""),L({message:"".concat(d," contact created"),success:!0}),setTimeout((function(){L(Object(c.a)(Object(c.a)({},I),{},{message:null}))}),3e3)})).catch((function(e){return U(e)}))}()},newName:d,handleNameChange:function(e){h(e.target.value)},newNumber:x,handleNumberChange:function(e){g(e.target.value)}}),Object(l.jsx)(O,{errorMessage:I}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(j,{persons:t,newFilter:C,remove:function(e){window.confirm("Delete ".concat(e.name,"?"))&&f.remove(e.id).then((function(n){var a=t.filter((function(n){return n.id!==e.id}));r(a)})).catch((function(e){console.log("Unable to remove from the server")}))}})]})};a.a.render(Object(l.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.bd9bed52.chunk.js.map